<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workshop Mobile App</title>
    <link rel="stylesheet" href="assets/style.css">
</head>
<body>
    <!-- Status Bar Mobile -->
    <div class="status-bar">
        <span class="time" id="statusTime">14:00</span>
        <div class="status-right">
            <span class="signal">‚óè‚óè‚óè‚óè</span>
            <span class="wifi">üì∂</span>
            <span class="battery">87%</span>
        </div>
    </div>

    <!-- √âcran de verrouillage -->
    <div id="lock-screen" class="screen active">
        <div class="lock-background">
            <div class="lock-content">
                <div class="time-display">
                    <div class="lock-time" id="lockTime">14:00</div>
                    <div class="lock-date" id="lockDate">Lundi 6 octobre</div>
                </div>
                
                <div class="unlock-section">
                    <div class="unlock-indicator"></div>
                    <p class="unlock-text">Balayez vers le haut pour d√©verrouiller</p>
                    <!-- <button class="unlock-btn" onclick="showRegistration()">
                        <span class="unlock-icon">üîì</span>
                        D√©verrouiller
                    </button> -->
                    <input type="range" id="unlock-btnNew" min="0" max="1" value="0" step="any">
                </div>
            </div>
        </div>

        <!-- Formulaire d'inscription -->
        <div id="registration-form" class="registration-modal hidden">
            <div class="modal-backdrop" onclick="hideRegistration()"></div>
            <div class="modal-content">
                <h2>Bienvenue !</h2>
                <p>Dites-nous en plus sur vous avant de commencer</p>
                
                <form id="userForm" onsubmit="registerUser(event)">
                    <div class="form-group">
                        <label class="form-label" for="grp_name">Blaze du groupe</label>
                        <input type="text" id="grp_name" class="form-control" required onclick="selctTxt(this)">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="player_nb">Nombre de joueurs</label>
                        <input type="number" id="player_nb" class="form-control" min="2" max="4" required value="2" onclick="selctTxt(this)">
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="player_name">Blazes des joueurs</label>
                        <div id="listOfNames"></div>
                    </div>
                    
                    <button type="submit" class="btn-primary">Let's start!</button>
                </form>
            </div>
        </div>
    </div>

    <script src="assets/app.js"></script>
</body>
</html>

<script>
    const playerNumberInput = document.getElementById("player_nb");
    const listOfNames = document.getElementById("listOfNames");

    // Some shit I need to run when the page is loaded
    document.addEventListener("DOMContentLoaded", () => {
        updatePlayerNameList();
    }),

    // Action to "unlock" the screen
    document.getElementById("unlock-btnNew").addEventListener("input", (e) => {
        if (e.target.value > 0.5) showRegistration();
    });

    // Dynamically insert text inputs for players's name
    playerNumberInput.addEventListener("input", updatePlayerNameList);

    function updatePlayerNameList() {
        listOfNames.innerHTML = "";     // remove child nodes

        for (let i = 0; i < playerNumberInput.value; i++) {
            let currInput = document.createElement("input");
            currInput.type = "text";
            currInput.name = `player_${i + 1}`;
            currInput.required = "true";
            currInput.value = `Joueur ${i + 1}`;
            currInput.className = "form-control";
            currInput.onclick = function() {selctTxt(this)};
            listOfNames.appendChild(currInput);
        }
    }

    // Reproduces the behavior of text selection on a phone when an input is selected
    const selctTxt = (htmlElement) => htmlElement.select();
</script>
<style>
    #unlock-btnNew {
        -webkit-appearance: none;
        appearance: none;
        background: none;
        transform: rotate(-90deg);
        width: 60vh;
    }
    #unlock-btnNew::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        background: rgba(255, 255, 255, 0.2);
        border: 1px solid rgba(255, 255, 255, 0.3);
        width: 50px;
        height: 50px;
        border-radius: 50px;
        color: white;
        cursor: pointer;
    }
    #listOfNames {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 5px;
    }
</style>